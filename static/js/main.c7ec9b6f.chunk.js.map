{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/Api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmPopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","onClick","type","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","avatar","about","map","Footer","ImagePopup","isOpen","onClose","e","target","classList","contains","api","config","this","_url","url","_headers","headers","res","ok","json","Promise","reject","fetch","method","then","_checkResponse","data","body","JSON","stringify","info","id","disLike","addLike","authorization","PopupWithForm","title","children","onSubmit","isDisabled","action","disabled","EditProfilePopup","onUpdateUser","useState","inputValues","setInputValues","inputValid","setInputValid","inputError","setInputError","inputDirty","setInputDirty","blurHandler","checkInputValid","value","validity","valid","validationMessage","useEffect","preventDefault","placeholder","minLength","maxLength","required","onBlur","onChange","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","defaultValue","AddPlacePopup","ConfirmPopup","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isImagePopupOpen","setImagePopupOpen","selectedCard","setSelectedCard","isConfirmPopupOpen","setConfirmPopupOpen","setCurrentUser","setCards","closeAllPopups","all","getAllCards","getApiUserInfo","allCards","userData","catch","err","console","log","close","keyCode","document","addEventListener","removeEventListener","Provider","changeLikeCardStatus","newCard","state","c","patchUserInfo","addCard","changeAvatar","deleteCard","newCards","filter","elem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c7ec9b6f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import logo from \"../images/logo.svg\";\r\n\r\nfunction Header() {\r\n    return (\r\n            <header className=\"header page__item\">\r\n                <img src={logo} alt=\"Лого шапки\" className=\"header__logo\" />\r\n            </header>\r\n        );\r\n        }\r\n\r\nexport default Header;","import {createContext} from 'react';\r\n\r\nexport const CurrentUserContext = createContext();","import {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\nimport {useContext} from 'react';\r\n\r\nfunction Card({card, onCardClick, onCardLike, onCardDelete}) {\r\n\r\n    //Подписываемся на контекст\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    // Определяем, являемся ли мы владельцем текущей карточки\r\n    const isOwn = card.owner._id === currentUser._id;\r\n\r\n    // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n    const cardDeleteButtonClassName = (\r\n        `element__trash ${isOwn ? 'element__trash_visible' : 'element__trash_hidden'}`\r\n    );\r\n\r\n    // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n    const cardLikeButtonClassName = (\r\n        `element__like ${isLiked ? 'element__like_active' : 'element__like'}`\r\n    );\r\n\r\n    function handleClick() {\r\n        onCardClick(card);\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        onCardLike(card);\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        onCardDelete(card);\r\n    }\r\n\r\n    return (\r\n        <article className=\"element\">\r\n            <img src={card.link} alt={card.name} className=\"element__image\" onClick={handleClick}/>\r\n            <div className=\"element__caption\">\r\n                <h2 className=\"element__description\">{card.name}</h2>\r\n                <div className=\"element__likes\">\r\n                    <button className={cardLikeButtonClassName} onClick={handleLikeClick} type=\"button\" aria-label=\"Нравится\" />\r\n                    <span className=\"element__number-of-likes\">{card.likes.length}</span>\r\n                </div>\r\n            </div>\r\n            <button className={cardDeleteButtonClassName} onClick={handleDeleteClick} type=\"button\" aria-label=\"Удалить\" />\r\n        </article>\r\n    );\r\n}\r\n\r\nexport default Card;","import {useContext} from 'react';\r\nimport Card from './Card';\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete}) {\r\n\r\n    //Подписываемся на контекст\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    return (\r\n        <main className=\"content\">\r\n            <section className=\"profile page__item\">\r\n                <div className=\"profile__avatar-container\">\r\n                    <button onClick={onEditAvatar} className=\"profile__avatar-edit\"/>\r\n                    <img src={currentUser.avatar} alt={`Аватар пользователя ${currentUser.name}`}\r\n                         className=\"profile__avatar\"/>\r\n                </div>\r\n                <div className=\"profile__info\">\r\n                    <div className=\"profile__container\">\r\n                        <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                        <button onClick={onEditProfile} className=\"profile__edit-button\" type=\"button\"\r\n                                aria-label=\"Изменить имя\">\r\n                        </button>\r\n                    </div>\r\n                    <p className=\"profile__description\">{currentUser.about}</p>\r\n                </div>\r\n                <button onClick={onAddPlace} className=\"profile__add-button\" type=\"button\" aria-label=\"Добавить фото\"/>\r\n            </section>\r\n\r\n            <section className=\"elements page__item\" aria-label=\"Фотогалерея\">\r\n                {cards.map(card =>\r\n                    <Card card={card} key={card._id} onCardClick={onCardClick} onCardLike={onCardLike}\r\n                          onCardDelete={onCardDelete}/>\r\n                )}\r\n            </section>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","function Footer() {\r\n    return (\r\n        <footer className=\"footer page__item\">\r\n            <p className=\"footer__copy\">&copy; 2021 Mesto Russia</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","function ImagePopup({isOpen, card, onClose}) {\r\n\r\n    function handlePopupClose(e) {\r\n        if (e.target.classList.contains('popup_opened')) {\r\n            onClose();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`popup popup_type_open-image ${isOpen ? 'popup_opened' : ''}`}\r\n             onClick={handlePopupClose}>\r\n            <div className=\"popup__open-image\">\r\n                <img src={card ? card.link : ''} alt={card ? card.name: ''} className=\"popup__image\"/>\r\n                <p className=\"popup__image-title\">{card ? card.name: ''}</p>\r\n                <button className=\"popup__close popup__close_type_image\" type=\"button\" aria-label=\"Закрыть\"\r\n                        onClick={onClose}/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","class Api{\r\n    constructor(config) {\r\n        this._url = config.url;\r\n        this._headers = config.headers;\r\n    }\r\n    // проверка ответа\r\n    _checkResponse(res) {\r\n        if (res.ok){\r\n            return res.json();}\r\n        return Promise.reject('Произошла ошибка')\r\n    }\r\n\r\n    //Рендер всех карточек на страницу с сервера\r\n    getAllCards() {\r\n        return fetch(`${this._url}cards/`, {\r\n            method: 'GET',\r\n            headers: this._headers\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n    //Добавление карточки из формы\r\n    addCard(data) {\r\n        return fetch(`${this._url}cards/`, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                link: data.link\r\n            })\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n//Сменить аватар\r\n    changeAvatar(data) {\r\n        return fetch(`${this._url}users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: data.avatar\r\n            })\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n//Имя и работа с сервера в форму\r\n    getApiUserInfo() {\r\n        return fetch(`${this._url}users/me`, {\r\n            method: 'GET',\r\n            headers: this._headers,\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n//Имя и работа из формы на страницу\r\n    patchUserInfo(data) {\r\n        return fetch(`${this._url}users/me`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                about: data.info\r\n            })\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n//Удалить карточку\r\n    deleteCard(id) {\r\n        return fetch(`${this._url}cards/${id}`, {\r\n            method: \"DELETE\",\r\n            headers: this._headers,\r\n        }).then(this._checkResponse)\r\n    }\r\n//Добавить лайк\r\n    addLike(id) {\r\n        return fetch(`${this._url}cards/likes/${id}`, {\r\n            method: \"PUT\",\r\n            headers: this._headers,\r\n        }).then(this._checkResponse)\r\n    }\r\n\r\n    //Убрать лайк\r\n    disLike(id) {\r\n        return fetch(`${this._url}cards/likes/${id}`, {\r\n            method: \"DELETE\",\r\n            headers: this._headers,\r\n        }).then(this._checkResponse)\r\n    }\r\n\r\n    changeLikeCardStatus(id, isLiked) {\r\n        if (isLiked) {\r\n            return this.disLike(id);\r\n        } else {\r\n            return this.addLike(id);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n//Экземпляр API\r\nconst api= new Api({\r\n    url: \"https://mesto.nomoreparties.co/v1/cohort-29/\",\r\n    headers: {\r\n        \"content-type\": \"application/json\",\r\n        authorization: \"8bc97cc4-e8dd-4b97-8e8e-b29acddab317\"\r\n    }\r\n});\r\n\r\nexport default api;","function PopupWithForm({isOpen, onClose, name, title, children, onSubmit, isDisabled}) {\r\n\r\n    function handlePopupClose(e) {\r\n        if (e.target.classList.contains('popup_opened')) {\r\n            onClose();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`}\r\n        onClick={handlePopupClose}>\r\n            <div className={`popup__container popup__container_type_${name}`}>\r\n                <form action=\"#\" className={`popup__form popup__form_type_${name}`} name={`${name}`}\r\n                      onSubmit={onSubmit}>\r\n                    <h2 className=\"popup__form-header\">{title}</h2>\r\n                    {children}\r\n                    <button className={`popup__button ${isDisabled ?\r\n                        'popup__button_disabled'\r\n                        :\r\n                        ''\r\n                    }`}\r\n                            disabled={isDisabled} type=\"submit\">Сохранить\r\n                    </button>\r\n                </form>\r\n                <button onClick={onClose} className={`popup__close popup__close_type_${name}`}\r\n                        type=\"button\" aria-label=\"Закрыть\"/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PopupWithForm;","import PopupWithForm from \"./PopupWithForm\";\r\nimport {useState, useContext, useEffect} from \"react\";\r\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n    const [inputValues, setInputValues] = useState({name: '', info: ''});\r\n    const [inputValid, setInputValid] = useState({name: false, info: false});\r\n    const [inputError, setInputError] = useState({name: '', info: ''});\r\n    const [inputDirty, setInputDirty] = useState({name: false, info: false});\r\n\r\n    //Подписываемся на контекст\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    // После загрузки текущего пользователя из API\r\n    // его данные будут использованы в управляемых компонентах.\r\n    useEffect(() => {\r\n        if (currentUser && isOpen) {\r\n            setInputValues({name: currentUser.name, info: currentUser.about});\r\n            setInputValid({name: false, info: false});\r\n            setInputError({name: '', info: ''});\r\n            setInputDirty({name: false, info: false});\r\n        }\r\n    }, [currentUser, isOpen]);\r\n\r\n    // function handleChangeName(e) {\r\n    //     setName(e.target.value);\r\n    // }\r\n    //\r\n    // function handleChangeDescription(e) {\r\n    //     setDescription(e.target.value);\r\n    // }\r\n\r\n    function handleSubmit(e) {\r\n        // Запрещаем браузеру переходить по адресу формы\r\n        e.preventDefault();\r\n\r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        onUpdateUser({\r\n            name: inputValues.name,\r\n            info: inputValues.info,\r\n        });\r\n    }\r\n    //Если убрал курсор из инпута\r\n    function blurHandler(e) {\r\n        switch (e.target.name) {\r\n            case 'name':\r\n                setInputDirty({name: true});\r\n                break;\r\n            case 'info':\r\n                setInputDirty({info: true});\r\n                break;\r\n            default:\r\n                setInputDirty(false);\r\n                break;\r\n        }\r\n    }\r\n\r\n    //Проверка на валидность\r\n    function checkInputValid(e) {\r\n        setInputValues({\r\n            ...inputValues,\r\n            [e.target.name]: e.target.value\r\n        });\r\n        setInputValid ({\r\n            ...inputValid,\r\n            [e.target.name]: e.target.validity.valid\r\n        });\r\n        setInputError({\r\n            ...inputError,\r\n            [e.target.name]: e.target.validationMessage\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name={'profile'}\r\n            title={'Редактировать профиль'}\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            isDisabled={!inputValid.name || !inputValid.info}\r\n        >\r\n            <input type=\"text\" placeholder=\"Имя Фамилия\" className={`popup__input popup__input_value_name \r\n            ${!inputValid.name && inputDirty.name ? 'popup__input_type_error'\r\n                : ''}`}\r\n                   id=\"name-input\" name=\"name\" minLength=\"2\" maxLength=\"40\" required value={inputValues.name}\r\n                   onBlur={e => blurHandler(e)}\r\n                   onChange={checkInputValid}/>\r\n            <span id=\"name-input-error\" className=\"popup__input-error popup__input-error_active\">\r\n                {inputValid.name && !inputDirty.name ? '' : inputError.name}\r\n            </span>\r\n            <input type=\"text\" placeholder=\"Род деятельности\"\r\n                   className={`popup__input popup__input_value_job \r\n            ${!inputValid.info && inputDirty.info ? 'popup__input_type_error'\r\n                       : ''}`}\r\n                   id=\"job-input\" name=\"info\" minLength=\"2\" maxLength=\"200\" required value={inputValues.info}\r\n                   onBlur={e => blurHandler(e)}\r\n                   onChange={checkInputValid}/>\r\n            <span id=\"job-input-error\" className=\"popup__input-error popup__input-error_active\">\r\n                {inputValid.info && !inputDirty.info ? '' : inputError.info}\r\n            </span>\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default EditProfilePopup;","import PopupWithForm from \"./PopupWithForm\";\r\nimport {useEffect, useRef, useState} from \"react\";\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\r\n\r\n    const avatarRef = useRef('');\r\n    const [inputValid, setInputValid] = useState(false);\r\n    const [inputError, setInputError] = useState('');\r\n    const [inputDirty, setInputDirty] = useState(false);\r\n    const className = !inputValid && inputDirty ? 'popup__input_type_error popup__input popup__input_type_notlast'\r\n        : 'popup__input popup__input_type_notlast';\r\n\r\n    //Если убрал курсор из инпута\r\n    function blurHandler(e) {\r\n        switch (e.target.name) {\r\n            case 'avatar':\r\n                setInputDirty(true);\r\n                break;\r\n            default:\r\n                setInputDirty(false);\r\n                break;\r\n        }\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        onUpdateAvatar({\r\n            avatar: avatarRef.current.value,\r\n        });\r\n    }\r\n\r\n    function checkInputValid() {\r\n        setInputValid(avatarRef.current.validity.valid);\r\n        setInputError(avatarRef.current.validationMessage);\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            avatarRef.current.value = '';\r\n            setInputValid(false);\r\n            setInputError('');\r\n            setInputDirty(false);\r\n        }\r\n    }, [isOpen])\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name={'avatar'}\r\n            title={'Обновить аватар'}\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            isDisabled={!inputValid}\r\n        >\r\n            <input type=\"url\" placeholder=\"https://somewebsite.com/someimage.jpg\"\r\n                   className={className}\r\n                   id=\"avatar-input\"\r\n                   name=\"avatar\" required\r\n                   ref={avatarRef}\r\n                   defaultValue={''}\r\n                   onChange={checkInputValid}\r\n                   onBlur={e => blurHandler(e)}\r\n            />\r\n            <span id=\"avatar-input-error\" className=\"popup__input-error popup__input-error_active\">\r\n            {inputValid && !inputDirty ? '' : inputError}\r\n            </span>\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default EditAvatarPopup;","import PopupWithForm from \"./PopupWithForm\";\r\nimport {useState, useEffect} from \"react\";\r\n\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\r\n    const [inputValues, setInputValues] = useState({name: '', link: ''});\r\n    const [inputValid, setInputValid] = useState({name: false, link: false});\r\n    const [inputError, setInputError] = useState({name: '', link: ''});\r\n    const [inputDirty, setInputDirty] = useState({name: false, link: false});\r\n\r\n    // function handleChangeName(evt) {\r\n    //     setName(evt.target.value);\r\n    // }\r\n    //\r\n    // function handleChangeLink(evt) {\r\n    //     setLink(evt.target.value);\r\n    // }\r\n\r\n    function handleSubmit(e) {\r\n\r\n        e.preventDefault();\r\n\r\n        onAddPlace({\r\n            name: inputValues.name,\r\n            link: inputValues.link,\r\n        });\r\n    }\r\n\r\n    //Если убрал курсор из инпута\r\n    function blurHandler(e) {\r\n        switch (e.target.name) {\r\n            case 'name':\r\n                setInputDirty({name: true});\r\n                break;\r\n            case 'link':\r\n                setInputDirty({link: true});\r\n                break;\r\n            default:\r\n                setInputDirty(false);\r\n                break;\r\n        }\r\n    }\r\n\r\n    //Проверка на валидность\r\n    function checkInputValid(e) {\r\n        setInputValues({\r\n            ...inputValues,\r\n            [e.target.name]: e.target.value\r\n        });\r\n        setInputValid ({\r\n            ...inputValid,\r\n            [e.target.name]: e.target.validity.valid\r\n        });\r\n        setInputError({\r\n            ...inputError,\r\n            [e.target.name]: e.target.validationMessage\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setInputValues({name: '', link: ''});\r\n            setInputValid({name: false, link: false});\r\n            setInputError({name: '', link: ''});\r\n            setInputDirty({name: false, link: false});\r\n        }\r\n    }, [isOpen])\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name={'add-place'}\r\n            title={'Новое место'}\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            isDisabled={!inputValid.name || !inputValid.link}\r\n        >\r\n            <input type=\"text\" placeholder=\"Название\" className={`popup__input popup__input_value_place \r\n            ${!inputValid.name && inputDirty.name ? 'popup__input_type_error'\r\n        : ''}`}\r\n                   id=\"place-input\" name=\"name\" minLength=\"2\" maxLength=\"30\" value={inputValues.name || \"\"}\r\n                   // onChange={handleChangeName}\r\n                   onBlur={e => blurHandler(e)}\r\n                   onChange={checkInputValid}\r\n                   required/>\r\n            <span id=\"place-input-error\" className=\"popup__input-error  popup__input-error_active\">\r\n                {inputValid.name && !inputDirty.name ? '' : inputError.name}\r\n            </span>\r\n            <input type=\"url\" placeholder=\"Ссылка на картинку\"\r\n                   className={`popup__input popup__input_value_link \r\n                   ${!inputValid.link && inputDirty.link ? 'popup__input_type_error'\r\n        : ''}`}\r\n                   id=\"link-input\" name=\"link\" value={inputValues.link || \"\"}\r\n                   // onChange={handleChangeLink}\r\n                   onBlur={e => blurHandler(e)}\r\n                   onChange={checkInputValid} required/>\r\n            <span id=\"link-input-error\" className=\"popup__input-error  popup__input-error_active\">\r\n                {inputValid.link && !inputDirty.link ? '' : inputError.link}\r\n            </span>\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default AddPlacePopup;","import PopupWithForm from \"./PopupWithForm\";\r\n\r\n\r\nfunction ConfirmPopup({card, isOpen, onClose, onCardDelete}) {\r\n\r\n    function handleSubmit(e) {\r\n\r\n        e.preventDefault();\r\n\r\n        onCardDelete(card);\r\n    }\r\n\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name={'confirm'}\r\n            title={'Вы уверены?'}\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n        />\r\n    );\r\n}\r\n\r\nexport default ConfirmPopup;","import {useState, useEffect} from 'react';\nimport Header from '../components/Header';\nimport Main from '../components/Main';\nimport Footer from '../components/Footer';\n// import PopupWithForm from './PopupWithForm';\nimport ImagePopup from \"./ImagePopup\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\nimport api from \"../utils/Api\";\nimport EditProfilePopup from '../components/EditProfilePopup'\nimport EditAvatarPopup from '../components/EditAvatarPopup'\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ConfirmPopup from \"./ConfirmPopup\";\n\n\nfunction App() {\n    const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n    const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n    const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n    const [isImagePopupOpen, setImagePopupOpen] = useState(false);\n    const [selectedCard, setSelectedCard] = useState(null);\n    const [isConfirmPopupOpen, setConfirmPopupOpen] = useState(false);\n\n    const [currentUser, setCurrentUser] = useState('');\n    const [cards, setCards] = useState([]);\n\n    useEffect(() => {\n        Promise.all([api.getAllCards(), api.getApiUserInfo()])\n            .then(([allCards, userData]) => {\n                setCurrentUser(userData);\n                setCards(allCards);\n            })\n            .catch((err) => {\n                console.log(`${err}`);\n            });\n        const close = (e) => {\n            if(e.keyCode === 27){\n                closeAllPopups();\n            }\n        }\n        document.addEventListener('keydown', close)\n        return () => document.removeEventListener('keydown', close)\n    }, []);\n\n    function handleEditProfileClick() {\n        setEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setAddPlacePopupOpen(true);\n    }\n\n    function handleEditAvatarClick() {\n        setEditAvatarPopupOpen(true);\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard(card);\n        setImagePopupOpen(true);\n    }\n\n    function handleDeleteClick(card) {\n        setSelectedCard(card);\n        setConfirmPopupOpen(true);\n    }\n\n    function closeAllPopups() {\n        setEditProfilePopupOpen(false);\n        setAddPlacePopupOpen(false);\n        setEditAvatarPopupOpen(false);\n        setImagePopupOpen(false);\n        setConfirmPopupOpen(false);\n    }\n\n    //Изменить инфо пользователя\n    function handleUpdateUser(data) {\n        api.patchUserInfo(data)\n            .then(\n                (data) => {\n                    setCurrentUser(data);\n                    closeAllPopups();\n                })\n            .catch((err) => {\n                console.log(err);\n            })\n    }\n\n    //Изменить аватар\n    function handleUpdateAvatar(data) {\n        api.changeAvatar(data)\n            .then(\n                (data) => {\n                    setCurrentUser(data);\n                    closeAllPopups();\n                })\n            .catch((err) => {\n                console.log(err);\n            })\n    }\n\n    //Функция лайка карточки\n    function handleCardLike(card) {\n        // Снова проверяем, есть ли уже лайк на этой карточке\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n        // Отправляем запрос в API и получаем обновлённые данные карточки\n        api.changeLikeCardStatus(card._id, isLiked)\n            .then((newCard) => {\n                setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n            })\n            .catch((err) => {\n        console.log(err);\n    });\n    }\n\n    //Функция удаления карточки\n    function handleCardDelete(card) {\n        api.deleteCard(card._id)\n            .then(() => {\n                const newCards = cards.filter((elem) => elem !== card);\n                setCards(newCards);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }\n    //Функция добавления карточки\n    function handleAddPlaceSubmit(data) {\n        api.addCard(data)\n            .then((newCard) => {\n                setCards([newCard, ...cards]);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }\n\n  return (\n      <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n        <Main onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onCardDelete={handleDeleteClick}\n              cards={cards} />\n          <Footer />\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n          <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n          <ImagePopup\n              isOpen={isImagePopupOpen}\n              card={selectedCard}\n              onClose={closeAllPopups}/>\n          <ConfirmPopup onClose={closeAllPopups} isOpen={isConfirmPopupOpen} card={selectedCard} onCardDelete={handleCardDelete}/>\n      </div>\n      </CurrentUserContext.Provider>\n);\n}\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}